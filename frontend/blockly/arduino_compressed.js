// Do not edit this file; automatically generated by build.py.
'use strict';

/*
 Licensed under the Apache License, Version 2.0 (the "License"):
          http://www.apache.org/licenses/LICENSE-2.0
*/
Blockly.Arduino=new Blockly.Generator("Arduino");Blockly.Arduino.StaticTyping=new Blockly.StaticTyping;Blockly.Arduino.addReservedWords("Blockly,setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,integer,constants,floating,point,void,boolean,char,unsigned,byte,int,word,long,float,double,string,String,array,static,volatile,const,sizeofshiftOut,shitIn,millis,micros,delay,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random");
Blockly.Arduino.ORDER_ATOMIC=0;Blockly.Arduino.ORDER_UNARY_POSTFIX=1;Blockly.Arduino.ORDER_UNARY_PREFIX=2;Blockly.Arduino.ORDER_MULTIPLICATIVE=3;Blockly.Arduino.ORDER_ADDITIVE=4;Blockly.Arduino.ORDER_SHIFT=5;Blockly.Arduino.ORDER_RELATIONAL=6;Blockly.Arduino.ORDER_EQUALITY=7;Blockly.Arduino.ORDER_BITWISE_AND=8;Blockly.Arduino.ORDER_BITWISE_XOR=9;Blockly.Arduino.ORDER_BITWISE_OR=10;Blockly.Arduino.ORDER_LOGICAL_AND=11;Blockly.Arduino.ORDER_LOGICAL_OR=12;Blockly.Arduino.ORDER_CONDITIONAL=13;
Blockly.Arduino.ORDER_ASSIGNMENT=14;Blockly.Arduino.ORDER_NONE=99;Blockly.Arduino.PinTypes={INPUT:"INPUT",OUTPUT:"OUTPUT",PWM:"PWM",SERVO:"SERVO",STEPPER:"STEPPER",SERIAL:"SERIAL",I2C:"I2C/TWI",SPI:"SPI"};Blockly.Arduino.DEF_FUNC_NAME=Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_;
Blockly.Arduino.init=function(b){Blockly.Arduino.includes_=Object.create(null);Blockly.Arduino.definitions_=Object.create(null);Blockly.Arduino.variables_=Object.create(null);Blockly.Arduino.codeFunctions_=Object.create(null);Blockly.Arduino.userFunctions_=Object.create(null);Blockly.Arduino.functionNames_=Object.create(null);Blockly.Arduino.setups_=Object.create(null);Blockly.Arduino.pins_=Object.create(null);Blockly.Arduino.variableDB_?Blockly.Arduino.variableDB_.reset():Blockly.Arduino.variableDB_=
new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);var d=Blockly.Arduino.StaticTyping.collectVarsWithTypes(b);Blockly.Arduino.StaticTyping.setProcedureArgs(b,d)};
Blockly.Arduino.finish=function(b){var d=[],e=[],f=[],g;for(g in Blockly.Arduino.includes_)d.push(Blockly.Arduino.includes_[g]);d.length&&d.push("\n");for(g in Blockly.Arduino.definitions_)e.push(Blockly.Arduino.definitions_[g]);e.length&&e.push("\n");for(g in Blockly.Arduino.codeFunctions_)f.push(Blockly.Arduino.codeFunctions_[g]);for(g in Blockly.Arduino.userFunctions_)f.push(Blockly.Arduino.userFunctions_[g]);f.length&&f.push("\n");var h=[""],k="";void 0!==Blockly.Arduino.setups_.userSetupCode&&
(k="\n"+Blockly.Arduino.setups_.userSetupCode,delete Blockly.Arduino.setups_.userSetupCode);for(g in Blockly.Arduino.setups_)h.push(Blockly.Arduino.setups_[g]);k&&h.push(k);delete Blockly.Arduino.includes_;delete Blockly.Arduino.definitions_;delete Blockly.Arduino.codeFunctions_;delete Blockly.Arduino.userFunctions_;delete Blockly.Arduino.functionNames_;delete Blockly.Arduino.setups_;delete Blockly.Arduino.pins_;Blockly.Arduino.variableDB_.reset();d=d.join("\n")+""+e.join("\n")+f.join("\n\n");h="int64_t cbak(int64_t reserved) {"+
h.join("\n  ")+"\n return 0;\n}\n\n";b="int64_t hook(int64_t reserved) {\n"+b.replace(/\n/g,"\n")+"\n return 0;\n}\n\n";return d+"//Executed when an emitted transaction is successfully accepted into a ledger \n"+h+"//Executed whenever a transaction comes into or leaves from the account the Hook is set on \n"+b};Blockly.Arduino.addInclude=function(b,d){void 0===Blockly.Arduino.includes_[b]&&(Blockly.Arduino.includes_[b]=d)};
Blockly.Arduino.addDeclaration=function(b,d){void 0===Blockly.Arduino.definitions_[b]&&(Blockly.Arduino.definitions_[b]=d)};Blockly.Arduino.addVariable=function(b,d,e){var f=!1;if(e||void 0===Blockly.Arduino.variables_[b])Blockly.Arduino.variables_[b]=d,f=!0;return f};Blockly.Arduino.addSetup=function(b,d,e){var f=!1;if(e||void 0===Blockly.Arduino.setups_[b])Blockly.Arduino.setups_[b]=d,f=!0;return f};
Blockly.Arduino.addFunction=function(b,d){if(void 0===Blockly.Arduino.codeFunctions_[b]){var e=Blockly.Arduino.variableDB_.getDistinctName(b,Blockly.Generator.NAME_TYPE);Blockly.Arduino.codeFunctions_[b]=d.replace(Blockly.Arduino.DEF_FUNC_NAME,e);Blockly.Arduino.functionNames_[b]=e}return Blockly.Arduino.functionNames_[b]};
Blockly.Arduino.reservePin=function(b,d,e,f){void 0!==Blockly.Arduino.pins_[d]?Blockly.Arduino.pins_[d]!=e?b.setWarningText(Blockly.Msg.ARD_PIN_WARN1.replace("%1",d).replace("%2",f).replace("%3",e).replace("%4",Blockly.Arduino.pins_[d]),f):b.setWarningText(null,f):(Blockly.Arduino.pins_[d]=e,b.setWarningText(null,f))};Blockly.Arduino.scrubNakedValue=function(b){return b+";\n"};
Blockly.Arduino.quote_=function(b){b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'");return'"'+b+'"'};
Blockly.Arduino.scrub_=function(b,d){if(null===d)return"";var e="";if(!b.outputConnection||!b.outputConnection.targetConnection){var f=b.getCommentText();f&&(e+=this.prefixLines(f,"// ")+"\n");for(var g=0;g<b.inputList.length;g++)b.inputList[g].type==Blockly.INPUT_VALUE&&(f=b.inputList[g].connection.targetBlock())&&(f=this.allNestedComments(f))&&(e+=this.prefixLines(f,"// "))}g=b.nextConnection&&b.nextConnection.targetBlock();g=this.blockToCode(g);return e+d+g};
Blockly.Arduino.getArduinoType_=function(b){switch(b.typeId){case Blockly.Types.SHORT_NUMBER.typeId:return"char";case Blockly.Types.NUMBER.typeId:return"int";case Blockly.Types.LARGE_NUMBER.typeId:return"long";case Blockly.Types.DECIMAL.typeId:return"float";case Blockly.Types.TEXT.typeId:return"String";case Blockly.Types.CHARACTER.typeId:return"char";case Blockly.Types.BOOLEAN.typeId:return"boolean";case Blockly.Types.NULL.typeId:return"void";case Blockly.Types.UNDEF.typeId:return"undefined";case Blockly.Types.CHILD_BLOCK_MISSING.typeId:return"int";
case "uint8":return"uint8";default:return"Invalid Blockly Type"}};Blockly.Arduino.noGeneratorCodeInline=function(){return["",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.noGeneratorCodeLine=function(){return""};Blockly.Arduino.IO={};Blockly.Arduino.io_digitalwrite=function(b){var d=b.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(b,"STATE",Blockly.Arduino.ORDER_ATOMIC)||"LOW";Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.OUTPUT,"Digital Write");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", OUTPUT);",!1);return"digitalWrite("+d+", "+e+");\n"};
Blockly.Arduino.io_digitalread=function(b){var d=b.getFieldValue("PIN");Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.INPUT,"Digital Read");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", INPUT);",!1);return["digitalRead("+d+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_builtin_led=function(b){var d=b.getFieldValue("BUILT_IN_LED"),e=Blockly.Arduino.valueToCode(b,"STATE",Blockly.Arduino.ORDER_ATOMIC)||"LOW";Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.OUTPUT,"Set LED");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", OUTPUT);",!1);return"digitalWrite("+d+", "+e+");\n"};
Blockly.Arduino.io_analogwrite=function(b){var d=b.getFieldValue("PIN"),e=Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.OUTPUT,"Analogue Write");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", OUTPUT);",!1);0>e||255<e?b.setWarningText("The analogue value set must be between 0 and 255","pwm_value"):b.setWarningText(null,"pwm_value");return"analogWrite("+d+", "+e+");\n"};
Blockly.Arduino.io_analogread=function(b){var d=b.getFieldValue("PIN");Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.INPUT,"Analogue Read");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", INPUT);",!1);return["analogRead("+d+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_highlow=function(b){return[b.getFieldValue("STATE"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_pulsein=function(b){var d=b.getFieldValue("PULSEPIN"),e=Blockly.Arduino.valueToCode(b,"PULSETYPE",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.INPUT,"Pulse Pin");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", INPUT);\n",!1);return["pulseIn("+d+", "+e+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_pulsetimeout=function(b){var d=b.getFieldValue("PULSEPIN"),e=Blockly.Arduino.valueToCode(b,"PULSETYPE",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"TIMEOUT",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.INPUT,"Pulse Pin");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", INPUT);\n",!1);return["pulseIn("+d+", "+e+", "+f+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.tone={};Blockly.Arduino.io_tone=function(b){var d=b.getFieldValue("TONEPIN"),e=Blockly.Arduino.valueToCode(b,"FREQUENCY",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.OUTPUT,"Tone Pin");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", OUTPUT);\n",!1);return"tone("+d+","+e+");\n"};
Blockly.Arduino.io_notone=function(b){var d=b.getFieldValue("TONEPIN");Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.OUTPUT,"Tone Pin");Blockly.Arduino.addSetup("io_"+d,"pinMode("+d+", OUTPUT);\n",!1);return"noTone("+d+");\n"};Blockly.Arduino["float"]={};Blockly.Arduino.float_set=function(b){var d=Blockly.Arduino.valueToCode(b,"exponent",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"mantissa",Blockly.Arduino.ORDER_ATOMIC);return["float_set("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_multiply=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"float2",Blockly.Arduino.ORDER_ATOMIC);return["float_multiply("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_mulratio=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"round_up",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"numerator",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"denominator",Blockly.Arduino.ORDER_ATOMIC);return["float_mulratio("+d+","+e+","+f+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_negate=function(b){return["float_negate("+Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_compare=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"float2",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"mode",Blockly.Arduino.ORDER_ATOMIC);return["float_compare("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_sum=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"float2",Blockly.Arduino.ORDER_ATOMIC);return["float_sum("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_sto=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"cread_ptr",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"cread_len",Blockly.Arduino.ORDER_ATOMIC),h=Blockly.Arduino.valueToCode(b,"iread_ptr",Blockly.Arduino.ORDER_ATOMIC),k=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,
"field_code",Blockly.Arduino.ORDER_ATOMIC);return["float_sto("+d+","+e+","+f+","+g+","+h+","+k+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_sto_set=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC);return["float_sto_set("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_invert=function(b){return["float_invert("+Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_divide=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"float2",Blockly.Arduino.ORDER_ATOMIC);return["float_divide("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_one=function(b){return["float_one()",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_exponent=function(b){return["float_exponent("+Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_mantissa=function(b){return["float_mantissa("+Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_sign=function(b){return["float_sign("+Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_exponent_set=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"exponent",Blockly.Arduino.ORDER_ATOMIC);return["float_exponent_set("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_mantissa_set=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"mantissa",Blockly.Arduino.ORDER_ATOMIC);return["float_mantissa_set("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.float_sign_set=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"sign",Blockly.Arduino.ORDER_ATOMIC);return["float_sign_set("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.float_int=function(b){var d=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"decimal_places",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"absolute",Blockly.Arduino.ORDER_ATOMIC);return["float_int("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.variables={};Blockly.Arduino.variables_get=function(b){return[Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.variables_set=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+d+";\n"};
Blockly.Arduino.variables_set_type=function(b){var d=Blockly.Arduino.valueToCode(b,"VARIABLE_SETTYPE_INPUT",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return["("+b.getFieldValue("VARIABLE_SETTYPE_TYPE")+")("+d+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.pointer=function(b){var d=b.getFieldValue("type"),e=b.getFieldValue("NAME"),f=b.getFieldValue("pointer_name");b=Blockly.Arduino.valueToCode(b,"initial",Blockly.Arduino.ORDER_ATOMIC);d=d+" "+e+f+" = "+b+";\n";return Blockly.Arduino.variables_.test1=d};
Blockly.Arduino.string=function(b){var d=b.getFieldValue("type"),e=b.getFieldValue("mystring"),f=Blockly.Arduino.valueToCode(b,"length",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"string_var",Blockly.Arduino.ORDER_ATOMIC);d=d+" "+e+"["+f+"] = "+b+";\n";return Blockly.Arduino.variables_.test2=d};Blockly.Arduino.define_get=function(b){return[Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.define_declare=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",e=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);-1==Blockly.Blocks.checkLegalName(Blockly.Msg.VARIABLES_ILLEGALNAME,e)&&this.initVar();b=Blockly.Arduino.scrub_(b,"#define "+e+" "+d);Blockly.Arduino.definitions_["define_"+e]=b;return null};
Blockly.Arduino.variables_get=function(b){return[Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.variables_set=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+d+";\n"};
Blockly.Arduino.variables_declare=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",e=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return b.getFieldValue("TYPES")+" "+e+" = "+d+";\n"};Blockly.Arduino.variables_pointer_get=function(b){return[Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.variables_pointer_set=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";return Blockly.Arduino.valueToCode(b,"VAR",Blockly.Arduino.ORDER_ASSIGNMENT)+" = "+d+";\n"};
Blockly.Arduino.variables_pointer_declare=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",e=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),f=b.getFieldValue("TYPES");if("*"==b.getFieldValue("ITERATION")||"**"==b.getFieldValue("ITERATION")||"***"==b.getFieldValue("ITERATION"))b=b.getFieldValue("ITERATION");else return window.alert("please confirm asterisk. that must be among *, **, and  ***."),0;return f+" "+b+
e+" = "+d+";\n"};
Blockly.Arduino.variables_array_get=function(b){var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=b.getFieldValue("LENGTH_1");0==isNaN(e)&&(e=""==e?-1:1*e);for(var f=Blockly.Variables.allVariables(),g=[],h=0;h<f.length;h++)f[h][1]==a&&c.push([f[h][0],f[h][1],f[h][2],f[h][3],f[h][4],f[h][5]]);console.log(g);f=Blockly.Blocks.getIndexArray(g,d);var k;f=Blockly.Blocks.checkArrayIndex(e,f[0]);0==f&&-1!=e?(window.alert("index exceeded"),b.initIdx(f)):1==f?k=
d+"["+e+"]":b.initIdx(f);return[k,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.variables_array_set=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",e=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),f=b.getFieldValue("LENGTH_1");f=""==f?-1:1*f;var g=Blockly.Blocks.getWantedBlockArray("a");g=Blockly.Blocks.getIndexArray(g,e);var h;g=Blockly.Blocks.checkArrayIndex(f,g[0]);0==g&&-1!=f?(window.alert("\uc778\ub371\uc2a4 \ucd08\uacfc"),b.initIdx(g)):1==g&&0==isAvbNum2?h=e+"["+f+"] = "+
d+";\n":b.initIdx(g,isAvbNum2,isAvbNum3);return h};Blockly.Arduino.variables_array_declare=function(b){Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT);var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=b.getFieldValue("TYPES");b=b.getFieldValue("LENGTH_1");return e+" "+d+"["+b+"];\n"};Blockly.Arduino.logic={};Blockly.Arduino.controls_if=function(b){var d=0,e=Blockly.Arduino.valueToCode(b,"IF"+d,Blockly.Arduino.ORDER_NONE)||"false",f=Blockly.Arduino.statementToCode(b,"DO"+d),g="if ("+e+") {\n"+f+"}";for(d=1;d<=b.elseifCount_;d++)e=Blockly.Arduino.valueToCode(b,"IF"+d,Blockly.Arduino.ORDER_NONE)||"false",f=Blockly.Arduino.statementToCode(b,"DO"+d),g+=" else if ("+e+") {\n"+f+"}";b.elseCount_&&(f=Blockly.Arduino.statementToCode(b,"ELSE"),g+=" else {\n"+f+"}");return g+"\n"};
Blockly.Arduino.logic_compare=function(b){var d={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[b.getFieldValue("OP")],e="=="==d||"!="==d?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,f=Blockly.Arduino.valueToCode(b,"A",e)||"0";b=Blockly.Arduino.valueToCode(b,"B",e)||"0";return[f+" "+d+" "+b,e]};
Blockly.Arduino.logic_operation=function(b){var d="AND"==b.getFieldValue("OP")?"&&":"||",e="&&"==d?Blockly.Arduino.ORDER_LOGICAL_AND:Blockly.Arduino.ORDER_LOGICAL_OR,f=Blockly.Arduino.valueToCode(b,"A",e)||"false";b=Blockly.Arduino.valueToCode(b,"B",e)||"false";if(f||b){var g="&&"==d?"true":"false";f||(f=g);b||(b=g)}else b=f="false";return[f+" "+d+" "+b,e]};
Blockly.Arduino.logic_negate=function(b){var d=Blockly.Arduino.ORDER_UNARY_PREFIX;return["!"+(Blockly.Arduino.valueToCode(b,"BOOL",d)||"false"),d]};Blockly.Arduino.logic_boolean=function(b){return["TRUE"==b.getFieldValue("BOOL")?"true":"false",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.logic_null=function(b){return["NULL",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.logic_ternary=function(b){var d=Blockly.Arduino.valueToCode(b,"IF",Blockly.Arduino.ORDER_CONDITIONAL)||"false",e=Blockly.Arduino.valueToCode(b,"THEN",Blockly.Arduino.ORDER_CONDITIONAL)||"null";b=Blockly.Arduino.valueToCode(b,"ELSE",Blockly.Arduino.ORDER_CONDITIONAL)||"null";return[d+" ? "+e+" : "+b,Blockly.Arduino.ORDER_CONDITIONAL]};Blockly.Arduino.emittedtransaction={};Blockly.Arduino.etxn_burden=function(b){return["etxn_burden()",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.etxn_details=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);return["etxn_details("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.etxn_fee_base=function(b){return["etxn_fee_base("+Blockly.Arduino.valueToCode(b,"tx_byte_count",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.etxn_reserve=function(b){return["etxn_reserve("+Blockly.Arduino.valueToCode(b,"count",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.emit=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);return"emit("+Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC)+","+d+");\n"};Blockly.Arduino.etxn_generation=function(b){return["etxn_generation()",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.slot={};Blockly.Arduino.slot=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC);return["slot("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.slot_clear=function(b){return["slot_clear("+Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.slot_count=function(b){return["slot_count("+Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.slot_id=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC);return["slot_id("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.slot_set=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC);return["slot_set("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.slot_size=function(b){return["slot_size("+Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.slot_subarray=function(b){var d=Blockly.Arduino.valueToCode(b,"parent_slot",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"array_id",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"new_slot",Blockly.Arduino.ORDER_ATOMIC);return["slot_subarray("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.slot_subfield=function(b){var d=Blockly.Arduino.valueToCode(b,"parent_slot",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"field_id",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"new_slot",Blockly.Arduino.ORDER_ATOMIC);return["slot_subfield("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.slot_type=function(b){var d=Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"flags",Blockly.Arduino.ORDER_ATOMIC);return["slot_type("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.slot_float=function(b){return["slot_float("+Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.ledger={};Blockly.Arduino.hook_account=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);return["hook_account("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.hook_hash=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);return["hook_hash("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.ledger_last_hash=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);return["ledger_last_hash("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.nonce=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);return["nonce("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.fee_base=function(b){return["fee_base()",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.ledger_seq=function(b){return["ledger_seq()",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.hooks={};Blockly.Arduino.firewall=function(b){b.getFieldValue("block_account");var d=Blockly.Arduino.valueToCode(b,"x",Blockly.Arduino.ORDER_ATOMIC);b.getFieldValue("wallet_address");Blockly.Arduino.valueToCode(b,"y",Blockly.Arduino.ORDER_ATOMIC);b.getFieldValue("blacklist_server");Blockly.Arduino.valueToCode(b,"z",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.addDeclaration("hooks","#defind BLACKLIST_ACCOUNT "+d);return'GUARD(1);\n// fetch the originating account ID \nuint8_t otxn_accid[20];\nif (otxn_field(otxn_accid, 20, sfAccount) != 20)\n    rollback(SBUF("Firewall: Could not fetch sfAccount from originating transaction!!!"), 100);\n\n// RH NOTE in production you should always specify account IDs directly as a preset 20 byte array\n// translating from r-addr here is just for demonstration purposes.\nuint8_t blacklist_accid[20];\nif (util_accid(SBUF(blacklist_accid), SBUF(BLACKLIST_ACCOUNT)) != 20)\n    rollback(SBUF("Firewall: Could not decode blacklist account id."), 200);\n\n// look up the account ID in the foreign state (blacklist accounts hook state)\nuint8_t blacklist_status[1] = { 0 };\nint64_t lookup = state_foreign(SBUF(blacklist_status), SBUF(otxn_accid), SBUF(blacklist_accid));\nif (lookup == INVALID_ACCOUNT)\n    trace(SBUF("Firewall: Warning specified blacklist account does not exist."), 0, 0, 0);\n\nif (blacklist_status[0] == 0)\n    accept(SBUF("Firewall: Allowing transaction."), 0);\n\nrollback(SBUF("Firewall: Blocking transaction from blacklisted account."), 1);\n\n'};
Blockly.Arduino.accept=function(b){return'/** \n* This hook just accepts any transaction coming through it\n*/\nTRACESTR("Accept.c: Called.");\naccept (0,0,0); \n_g(1,1);   // every hook needs to import guard function and use it at least once \n// unreachable \n'};Blockly.Arduino.controls={};Blockly.Arduino.control_accept=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"error_code",Blockly.Arduino.ORDER_ATOMIC);return"accept("+d+","+b+");\n"};Blockly.Arduino.control_rollback=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"error_code",Blockly.Arduino.ORDER_ATOMIC);return"rollback("+d+","+b+");\n"};Blockly.Arduino.trace={};Blockly.Arduino.trace=function(b){var d=Blockly.Arduino.valueToCode(b,"mread_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"mread_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"dread_ptr",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"dread_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"as_hex",Blockly.Arduino.ORDER_ATOMIC);return["trace("+d+","+e+","+f+","+g+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.trace_slot=function(b){var d=Blockly.Arduino.valueToCode(b,"mread_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"mread_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC);return["trace_slot("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.trace_num=function(b){var d=Blockly.Arduino.valueToCode(b,"mread_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"mread_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"number",Blockly.Arduino.ORDER_ATOMIC);return["trace_slot("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.trace_float=function(b){var d=Blockly.Arduino.valueToCode(b,"mread_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"mread_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"float1",Blockly.Arduino.ORDER_ATOMIC);return["trace_float("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.state=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"kread_len",Blockly.Arduino.ORDER_ATOMIC);return["state("+d+","+e+","+f+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.state_set=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"kread_len",Blockly.Arduino.ORDER_ATOMIC);return["state_set("+d+","+e+","+f+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.state_foreign=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"kread_len",Blockly.Arduino.ORDER_ATOMIC),h=Blockly.Arduino.valueToCode(b,"aread_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"aread_len",Blockly.Arduino.ORDER_ATOMIC);return["state_foreign("+
d+","+e+","+f+","+g+","+h+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.stepper={};
Blockly.Arduino.stepper_config=function(b){var d=Blockly.Arduino.PinTypes.STEPPER,e=b.getFieldValue("STEPPER_NAME"),f=b.getFieldValue("STEPPER_NUMBER_OF_PINS"),g=Blockly.Arduino.valueToCode(b,"STEPPER_STEPS",Blockly.Arduino.ORDER_ATOMIC)||"360",h=Blockly.Arduino.valueToCode(b,"STEPPER_SPEED",Blockly.Arduino.ORDER_ATOMIC)||"90",k=[b.getFieldValue("STEPPER_PIN1"),b.getFieldValue("STEPPER_PIN2")];"FOUR"===f&&(k.push(b.getFieldValue("STEPPER_PIN3")),k.push(b.getFieldValue("STEPPER_PIN4")));f="int "+e+
"["+k.length+"] = {";g="Stepper stepper_"+e+"("+g+", ";for(var l=0;l<k.length;l++)Blockly.Arduino.reservePin(b,k[l],d,"Stepper"),f+=k[l]+", ",g+=k[l]+", ";f=f.slice(0,-2)+"};";g=g.slice(0,-2)+");";Blockly.Arduino.addVariable(e,f,!0);e="stepper_"+e;Blockly.Arduino.addInclude("stepper","#include <Stepper.h>");Blockly.Arduino.addDeclaration(e,g);Blockly.Arduino.addSetup(e,e+".setSpeed("+h+");",!0);return""};
Blockly.Arduino.stepper_step=function(b){var d="stepper_"+b.getFieldValue("STEPPER_NAME");b=Blockly.Arduino.valueToCode(b,"STEPPER_STEPS",Blockly.Arduino.ORDER_ATOMIC)||"0";return d+".step("+b+");\n"};Blockly.Arduino.time={};Blockly.Arduino.time_delay=function(b){return"delay("+(Blockly.Arduino.valueToCode(b,"DELAY_TIME_MILI",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"};Blockly.Arduino.time_delaymicros=function(b){return"delayMicroseconds("+(Blockly.Arduino.valueToCode(b,"DELAY_TIME_MICRO",Blockly.Arduino.ORDER_ATOMIC)||"0")+");\n"};Blockly.Arduino.time_millis=function(b){return["millis()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.time_micros=function(b){return["micros()",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.infinite_loop=function(b){return"while(true);\n"};Blockly.Arduino.servo={};Blockly.Arduino.servo_write=function(b){var d=b.getFieldValue("SERVO_PIN"),e=Blockly.Arduino.valueToCode(b,"SERVO_ANGLE",Blockly.Arduino.ORDER_ATOMIC)||"90",f="myServo"+d;Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.SERVO,"Servo Write");Blockly.Arduino.addInclude("servo","#include <Servo.h>");Blockly.Arduino.addDeclaration("servo_"+d,"Servo "+f+";");Blockly.Arduino.addSetup("servo_"+d,f+".attach("+d+");",!0);return f+".write("+e+");\n"};
Blockly.Arduino.servo_read=function(b){var d=b.getFieldValue("SERVO_PIN"),e="myServo"+d;Blockly.Arduino.reservePin(b,d,Blockly.Arduino.PinTypes.SERVO,"Servo Read");Blockly.Arduino.addInclude("servo","#include <Servo.h>");Blockly.Arduino.addDeclaration("servo_"+d,"Servo "+e+";");Blockly.Arduino.addSetup("servo_"+d,e+".attach("+d+");",!0);return[e+".read()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.lists={};Blockly.Arduino.lists_create_empty=function(b){return["[]",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.lists_create_with=function(b){for(var d=Array(b.itemCount_),e=0;e<b.itemCount_;e++)d[e]=Blockly.Arduino.valueToCode(b,"ADD"+e,Blockly.Arduino.ORDER_COMMA)||"null";d="["+d.join(", ")+"]";return[d,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.lists_repeat=function(b){var d=Blockly.Arduino.provideFunction_("lists_repeat",["function "+Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"]),e=Blockly.Arduino.valueToCode(b,"ITEM",Blockly.Arduino.ORDER_COMMA)||"null";b=Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_COMMA)||"0";return[d+"("+e+", "+b+")",Blockly.Arduino.ORDER_FUNCTION_CALL]};
Blockly.Arduino.lists_length=function(b){return[(Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_FUNCTION_CALL)||"[]")+".length",Blockly.Arduino.ORDER_MEMBER]};Blockly.Arduino.lists_isEmpty=function(b){return["!"+(Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_MEMBER)||"[]")+".length",Blockly.Arduino.ORDER_LOGICAL_NOT]};
Blockly.Arduino.lists_indexOf=function(b){var d="FIRST"==b.getFieldValue("END")?"indexOf":"lastIndexOf",e=Blockly.Arduino.valueToCode(b,"FIND",Blockly.Arduino.ORDER_NONE)||"''";return[(Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_MEMBER)||"[]")+"."+d+"("+e+") + 1",Blockly.Arduino.ORDER_MEMBER]};
Blockly.Arduino.lists_getIndex=function(b){var d=b.getFieldValue("MODE")||"GET",e=b.getFieldValue("WHERE")||"FROM_START",f=Blockly.Arduino.valueToCode(b,"AT",Blockly.Arduino.ORDER_UNARY_NEGATION)||"1";b=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_MEMBER)||"[]";if("FIRST"==e){if("GET"==d)return[b+"[0]",Blockly.Arduino.ORDER_MEMBER];if("GET_REMOVE"==d)return[b+".shift()",Blockly.Arduino.ORDER_MEMBER];if("REMOVE"==d)return b+".shift();\n"}else if("LAST"==e){if("GET"==d)return[b+".slice(-1)[0]",
Blockly.Arduino.ORDER_MEMBER];if("GET_REMOVE"==d)return[b+".pop()",Blockly.Arduino.ORDER_MEMBER];if("REMOVE"==d)return b+".pop();\n"}else if("FROM_START"==e){f=Blockly.isNumber(f)?parseFloat(f)-1:f+" - 1";if("GET"==d)return[b+"["+f+"]",Blockly.Arduino.ORDER_MEMBER];if("GET_REMOVE"==d)return[b+".splice("+f+", 1)[0]",Blockly.Arduino.ORDER_FUNCTION_CALL];if("REMOVE"==d)return b+".splice("+f+", 1);\n"}else if("FROM_END"==e){if("GET"==d)return[b+".slice(-"+f+")[0]",Blockly.Arduino.ORDER_FUNCTION_CALL];
if("GET_REMOVE"==d||"REMOVE"==d){e=Blockly.Arduino.provideFunction_("lists_remove_from_end",["function "+Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_+"(list, x) {","  x = list.length - x;","  return list.splice(x, 1)[0];","}"]);f=e+"("+b+", "+f+")";if("GET_REMOVE"==d)return[f,Blockly.Arduino.ORDER_FUNCTION_CALL];if("REMOVE"==d)return f+";\n"}}else if("RANDOM"==e){e=Blockly.Arduino.provideFunction_("lists_get_random_item",["function "+Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);",
"  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"]);f=e+"("+b+", "+("GET"!=d)+")";if("GET"==d||"GET_REMOVE"==d)return[f,Blockly.Arduino.ORDER_FUNCTION_CALL];if("REMOVE"==d)return f+";\n"}throw"Unhandled combination (lists_getIndex).";};
Blockly.Arduino.lists_setIndex=function(b){function d(){if(e.match(/^\w+$/))return"";var k=Blockly.Arduino.variableDB_.getDistinctName("tmp_list",Blockly.Variables.NAME_TYPE),l="var "+k+" = "+e+";\n";e=k;return l}var e=Blockly.Arduino.valueToCode(b,"LIST",Blockly.Arduino.ORDER_MEMBER)||"[]",f=b.getFieldValue("MODE")||"GET",g=b.getFieldValue("WHERE")||"FROM_START",h=Blockly.Arduino.valueToCode(b,"AT",Blockly.Arduino.ORDER_NONE)||"1";b=Blockly.Arduino.valueToCode(b,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||
"null";if("FIRST"==g){if("SET"==f)return e+"[0] = "+b+";\n";if("INSERT"==f)return e+".unshift("+b+");\n"}else if("LAST"==g){if("SET"==f)return g=d(),g+(e+"["+e+".length - 1] = "+b+";\n");if("INSERT"==f)return e+".push("+b+");\n"}else if("FROM_START"==g){h=Blockly.isNumber(h)?parseFloat(h)-1:h+" - 1";if("SET"==f)return e+"["+h+"] = "+b+";\n";if("INSERT"==f)return e+".splice("+h+", 0, "+b+");\n"}else if("FROM_END"==g){g=d();if("SET"==f)return g+(e+"["+e+".length - "+h+"] = "+b+";\n");if("INSERT"==f)return g+
(e+".splice("+e+".length - "+h+", 0, "+b+");\n")}else if("RANDOM"==g){g=d();h=Blockly.Arduino.variableDB_.getDistinctName("tmp_x",Blockly.Variables.NAME_TYPE);g+="var "+h+" = Math.floor(Math.random() * "+e+".length);\n";if("SET"==f)return g+(e+"["+h+"] = "+b+";\n");if("INSERT"==f)return g+(e+".splice("+h+", 0, "+b+");\n")}throw"Unhandled combination (lists_setIndex).";};Blockly.Arduino.utilities={};Blockly.Arduino.util_raddr=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);return["util_raddr("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.util_accid=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);return["util_accid("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.util_verify=function(b){var d=Blockly.Arduino.valueToCode(b,"dread_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"sread_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC);return["util_verify("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.util_sha512h=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);return["util_sha512h("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.util_keylet=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"keylet_type",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"a",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"b",Blockly.Arduino.ORDER_ATOMIC),h=Blockly.Arduino.valueToCode(b,"c",Blockly.Arduino.ORDER_ATOMIC),k=Blockly.Arduino.valueToCode(b,"d",Blockly.Arduino.ORDER_ATOMIC),l=Blockly.Arduino.valueToCode(b,"e",Blockly.Arduino.ORDER_ATOMIC);
b=Blockly.Arduino.valueToCode(b,"f",Blockly.Arduino.ORDER_ATOMIC);return["util_keylet("+d+","+e+","+f+","+g+","+h+","+k+","+l+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.procedures={};
Blockly.Arduino.procedures_defreturn=function(b){var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=Blockly.Arduino.statementToCode(b,"STACK");Blockly.Arduino.STATEMENT_PREFIX&&(e=Blockly.Arduino.prefixLines(Blockly.Arduino.STATEMENT_PREFIX.replace(/%1/g,"'"+b.id+"'"),Blockly.Arduino.INDENT)+e);Blockly.Arduino.INFINITE_LOOP_TRAP&&(e=Blockly.Arduino.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+b.id+"'")+e);var f=Blockly.Arduino.valueToCode(b,"RETURN",Blockly.Arduino.ORDER_NONE)||
"";f&&(f="  return "+f+";\n");for(var g=[],h=0;h<b.arguments_.length;h++)g[h]=Blockly.Arduino.getArduinoType_(b.getArgType(b.arguments_[h]))+" "+Blockly.Arduino.variableDB_.getName(b.arguments_[h],Blockly.Variables.NAME_TYPE);h=Blockly.Types.NULL;b.getReturnType&&(h=b.getReturnType());h=Blockly.Arduino.getArduinoType_(h);e=h+" "+d+"("+g.join(", ")+") {\n"+e+f+"}";e=Blockly.Arduino.scrub_(b,e);Blockly.Arduino.userFunctions_[d]=e;return null};Blockly.Arduino.procedures_defnoreturn=Blockly.Arduino.procedures_defreturn;
Blockly.Arduino.procedures_callreturn=function(b){for(var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=[],f=0;f<b.arguments_.length;f++)e[f]=Blockly.Arduino.valueToCode(b,"ARG"+f,Blockly.Arduino.ORDER_NONE)||"null";return[d+"("+e.join(", ")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.procedures_callnoreturn=function(b){for(var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),e=[],f=0;f<b.arguments_.length;f++)e[f]=Blockly.Arduino.valueToCode(b,"ARG"+f,Blockly.Arduino.ORDER_NONE)||"null";return d+"("+e.join(", ")+");\n"};
Blockly.Arduino.procedures_ifreturn=function(b){var d="if ("+(Blockly.Arduino.valueToCode(b,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false")+") {\n";b.hasReturnValue_?(b=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_NONE)||"null",d+="  return "+b+";\n"):d+="  return;\n";return d+"}\n"};
Blockly.Arduino.arduino_functions=function(b){var d=Blockly.Arduino.statementToCode(b,"SETUP_FUNC");d&&Blockly.Arduino.addSetup("userSetupCode",d,!0);b=b.getInputTargetBlock("LOOP_FUNC");d=Blockly.Arduino.blockToCode(b);if(!goog.isString(d))throw'Expecting code from statement block "'+b.type+'".';return d};Blockly.Arduino.math={};Blockly.Arduino.math_number=function(b){b=parseFloat(b.getFieldValue("NUM"));Infinity==b?b="INFINITY":-Infinity==b&&(b="-INFINITY");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.math_arithmetic=function(b){var d={ADD:[" + ",Blockly.Arduino.ORDER_ADDITIVE],MINUS:[" - ",Blockly.Arduino.ORDER_ADDITIVE],MULTIPLY:[" * ",Blockly.Arduino.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",Blockly.Arduino.ORDER_MULTIPLICATIVE],POWER:[null,Blockly.Arduino.ORDER_NONE]}[b.getFieldValue("OP")],e=d[0];d=d[1];var f=Blockly.Arduino.valueToCode(b,"A",d)||"0";b=Blockly.Arduino.valueToCode(b,"B",d)||"0";return e?[f+e+b,d]:["Math.pow("+f+", "+b+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.math_single=function(b){var d=b.getFieldValue("OP");if("NEG"==d)return b=Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_UNARY_PREFIX)||"0","-"==b[0]&&(b=" "+b),["-"+b,Blockly.Arduino.ORDER_UNARY_PREFIX];b="ABS"==d||"ROUND"==d.substring(0,5)?Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_UNARY_POSTFIX)||"0":"SIN"==d||"COS"==d||"TAN"==d?Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0":Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_NONE)||
"0";switch(d){case "ABS":var e="abs("+b+")";break;case "ROOT":e="sqrt("+b+")";break;case "LN":e="log("+b+")";break;case "EXP":e="exp("+b+")";break;case "POW10":e="pow(10,"+b+")";break;case "ROUND":e="round("+b+")";break;case "ROUNDUP":e="ceil("+b+")";break;case "ROUNDDOWN":e="floor("+b+")";break;case "SIN":e="sin("+b+" / 180 * Math.PI)";break;case "COS":e="cos("+b+" / 180 * Math.PI)";break;case "TAN":e="tan("+b+" / 180 * Math.PI)"}if(e)return[e,Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(d){case "LOG10":e=
"log("+b+") / log(10)";break;case "ASIN":e="asin("+b+") / M_PI * 180";break;case "ACOS":e="acos("+b+") / M_PI * 180";break;case "ATAN":e="atan("+b+") / M_PI * 180";break;default:throw"Unknown math operator: "+d;}return[e,Blockly.Arduino.ORDER_MULTIPLICATIVE]};
Blockly.Arduino.math_constant=function(b){return{PI:["M_PI",Blockly.Arduino.ORDER_UNARY_POSTFIX],E:["M_E",Blockly.Arduino.ORDER_UNARY_POSTFIX],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",Blockly.Arduino.ORDER_MULTIPLICATIVE],SQRT2:["M_SQRT2",Blockly.Arduino.ORDER_UNARY_POSTFIX],SQRT1_2:["M_SQRT1_2",Blockly.Arduino.ORDER_UNARY_POSTFIX],INFINITY:["INFINITY",Blockly.Arduino.ORDER_ATOMIC]}[b.getFieldValue("CONSTANT")]};
Blockly.Arduino.math_number_property=function(b){var d=Blockly.Arduino.valueToCode(b,"NUMBER_TO_CHECK",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0",e=b.getFieldValue("PROPERTY");if("PRIME"==e)return b=Blockly.Arduino.addFunction("mathIsPrime",["boolean "+Blockly.Arduino.DEF_FUNC_NAME+"(int n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n  if (n == 2 || n == 3) {\n    return true;\n  }\n  // False if n is NaN, negative, is 1.\n  // And false if n is divisible by 2 or 3.\n  if (isnan(n) || (n <= 1) || (n == 1) || (n % 2 == 0) || (n % 3 == 0)) {\n    return false;\n  }\n  // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n  for (int x = 6; x <= sqrt(n) + 1; x += 6) {\n    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n      return false;\n    }\n  }\n  return true;\n}"].join("\n")),
Blockly.Arduino.addInclude("math","#include <math.h>"),[b+"("+d+")",Blockly.Arduino.ORDER_UNARY_POSTFIX];switch(e){case "EVEN":var f=d+" % 2 == 0";break;case "ODD":f=d+" % 2 == 1";break;case "WHOLE":Blockly.Arduino.addInclude("math","#include <math.h>");f="(floor("+d+") == "+d+")";break;case "POSITIVE":f=d+" > 0";break;case "NEGATIVE":f=d+" < 0";break;case "DIVISIBLE_BY":b=Blockly.Arduino.valueToCode(b,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0",f=d+" % "+b+" == 0"}return[f,Blockly.Arduino.ORDER_EQUALITY]};
Blockly.Arduino.math_change=function(b){var d=Blockly.Arduino.valueToCode(b,"DELTA",Blockly.Arduino.ORDER_ADDITIVE)||"0";return Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" += "+d+";\n"};Blockly.Arduino.math_round=Blockly.Arduino.math_single;Blockly.Arduino.math_trig=Blockly.Arduino.math_single;Blockly.Arduino.math_on_list=Blockly.Arduino.noGeneratorCodeInline;
Blockly.Arduino.math_modulo=function(b){var d=Blockly.Arduino.valueToCode(b,"DIVIDEND",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0";b=Blockly.Arduino.valueToCode(b,"DIVISOR",Blockly.Arduino.ORDER_MULTIPLICATIVE)||"0";return[d+" % "+b,Blockly.Arduino.ORDER_MULTIPLICATIVE]};
Blockly.Arduino.math_constrain=function(b){var d=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_NONE)||"0",e=Blockly.Arduino.valueToCode(b,"LOW",Blockly.Arduino.ORDER_NONE)||"0";b=Blockly.Arduino.valueToCode(b,"HIGH",Blockly.Arduino.ORDER_NONE)||"0";return["("+d+" < "+e+" ? "+e+" : ( "+d+" > "+b+" ? "+b+" : "+d+"))",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.math_random_int=function(b){var d=Blockly.Arduino.valueToCode(b,"FROM",Blockly.Arduino.ORDER_NONE)||"0";b=Blockly.Arduino.valueToCode(b,"TO",Blockly.Arduino.ORDER_NONE)||"0";var e=Blockly.Arduino.variableDB_.getDistinctName("math_random_int",Blockly.Generator.NAME_TYPE);Blockly.Arduino.math_random_int.random_function=e;return[Blockly.Arduino.addFunction("mathRandomInt",["int "+Blockly.Arduino.DEF_FUNC_NAME+"(int min, int max) {","  if (min > max) {\n    // Swap min and max to ensure min is smaller.\n    int temp = min;\n    min = max;\n    max = temp;\n  }\n  return min + (rand() % (max - min + 1));\n}"].join("\n"))+
"("+d+", "+b+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.math_random_float=function(b){return["(rand() / RAND_MAX)",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.math_post_inc_decrement=function(b){var d=Blockly.Arduino.valueToCode(b,"VAR",Blockly.Arduino.ORDER_ATOMIC);b=b.getFieldValue("op");return[d+b,Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.state={};Blockly.Arduino.state=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC);return["state("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.state_set=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC);return["state_set("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.state_foreign=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"kread_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"aread_ptr",Blockly.Arduino.ORDER_ATOMIC);return["state_foreign("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.spi={};
Blockly.Arduino.spi_setup=function(b){var d=b.getFieldValue("SPI_ID"),e=b.getFieldValue("SPI_SHIFT_ORDER"),f=b.getFieldValue("SPI_CLOCK_DIVIDE");b=b.getFieldValue("SPI_MODE");Blockly.Arduino.addInclude("spi","#include <SPI.h>");Blockly.Arduino.addSetup("spi_order",d+".setBitOrder("+e+");",!0);Blockly.Arduino.addSetup("spi_mode",d+".setDataMode("+b+");",!0);Blockly.Arduino.addSetup("spi_div",d+".setClockDivider("+f+");",!0);Blockly.Arduino.addSetup("spi_begin",d+".begin();",!0);return""};
Blockly.Arduino.spi_transfer=function(b){var d=b.getFieldValue("SPI_ID"),e=b.getFieldValue("SPI_SS"),f=Blockly.Arduino.valueToCode(b,"SPI_DATA",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.addInclude("spi","#include <SPI.h>");Blockly.Arduino.addSetup("spi_begin",d+".begin();",!1);for(var g=Blockly.Arduino.Boards.selected.spiPins[d],h=0;h<g.length;h++)Blockly.Arduino.reservePin(b,g[h][1],Blockly.Arduino.PinTypes.SPI,"SPI "+g[h][0]);"none"!==e&&(Blockly.Arduino.reservePin(b,e,Blockly.Arduino.PinTypes.OUTPUT,
"SPI Slave pin"),Blockly.Arduino.addSetup("io_"+e,"pinMode("+e+", OUTPUT);",!1));b=[];"none"!==e&&b.push("digitalWrite("+e+", HIGH);");b.push(d+".transfer("+f+");");"none"!==e&&b.push("digitalWrite("+e+", LOW);");return b.join("\n")+"\n"};
Blockly.Arduino.spi_transfer_return=function(b){var d=b.getFieldValue("SPI_ID"),e=b.getFieldValue("SPI_SS"),f=Blockly.Arduino.valueToCode(b,"SPI_DATA",Blockly.Arduino.ORDER_ATOMIC)||"0";Blockly.Arduino.spi_transfer(b);return["none"===e?d+".transfer("+f+")":Blockly.Arduino.addFunction("spiReturnSlave"+e,["int "+Blockly.Arduino.DEF_FUNC_NAME+"() {","  int spiReturn = 0;","  digitalWrite("+e+", HIGH);","  spiReturn = "+d+".transfer("+f+");","  digitalWrite("+e+", LOW);","  return spiReturn;\n}"].join("\n"))+
"()",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.Boards={};Blockly.Arduino.Boards.generateDigitalIo=function(b,d){for(var e=[],f=b;f<d+1;f++)e.push([f.toString(),f.toString()]);return e};Blockly.Arduino.Boards.generateAnalogIo=function(b,d){for(var e=[],f=b;f<d+1;f++)e.push(["A"+f.toString(),"A"+f.toString()]);return e};
Blockly.Arduino.Boards.duplicateBoardProfile=function(b,d,e,f){return{name:d,description:e||b.description,compilerFlag:f||b.compilerFlag,analogPins:b.analogPins,digitalPins:b.digitalPins,pwmPins:b.pwmPins,serial:b.serial,serialPins:b.serialPins,serialSpeed:b.serialSpeed,spi:b.spi,spiPins:b.spiPins,spiClockDivide:b.spiClockDivide,i2c:b.i2c,i2cPins:b.i2cPins,i2cSpeed:b.i2cSpeed,builtinLed:b.builtinLed,interrupt:b.interrupt}};Blockly.Arduino.Boards.profiles={};
Blockly.Arduino.Boards.profiles.uno={name:"Arduino Uno",description:"Arduino Uno standard compatible board",compilerFlag:"arduino:avr:uno",analogPins:Blockly.Arduino.Boards.generateAnalogIo(0,5),digitalPins:Blockly.Arduino.Boards.generateDigitalIo(0,13).concat(Blockly.Arduino.Boards.generateAnalogIo(0,5)),pwmPins:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],serial:[["serial","Serial"]],serialPins:{Serial:[["RX","0"],["TX","1"]]},serialSpeed:[["300","300"],["600","600"],["1200",
"1200"],["2400","2400"],["4800","4800"],["9600","9600"],["14400","14400"],["19200","19200"],["28800","28800"],["31250","31250"],["38400","38400"],["57600","57600"],["115200","115200"]],spi:[["SPI","SPI"]],spiPins:{SPI:[["MOSI","11"],["MISO","12"],["SCK","13"]]},spiClockDivide:[["2 (8MHz)","SPI_CLOCK_DIV2"],["4 (4MHz)","SPI_CLOCK_DIV4"],["8 (2MHz)","SPI_CLOCK_DIV8"],["16 (1MHz)","SPI_CLOCK_DIV16"],["32 (500KHz)","SPI_CLOCK_DIV32"],["64 (250KHz)","SPI_CLOCK_DIV64"],["128 (125KHz)","SPI_CLOCK_DIV128"]],
i2c:[["I2C","Wire"]],i2cPins:{Wire:[["SDA","A4"],["SCL","A5"]]},i2cSpeed:[["100kHz","100000L"],["400kHz","400000L"]],builtinLed:[["BUILTIN_1","13"]],interrupt:[["interrupt0","2"],["interrupt1","3"]]};
Blockly.Arduino.Boards.profiles.nano_328={name:"Arduino Nano 328",description:"Arduino Nano with ATmega328 board",compilerFlag:"arduino:avr:nano:cpu=atmega328",analogPins:Blockly.Arduino.Boards.generateAnalogIo(0,7),digitalPins:Blockly.Arduino.Boards.generateDigitalIo(0,13).concat(Blockly.Arduino.Boards.generateAnalogIo(0,7)),pwmPins:Blockly.Arduino.Boards.profiles.uno.pwmPins,serial:Blockly.Arduino.Boards.profiles.uno.serial,serialPins:Blockly.Arduino.Boards.profiles.uno.serialPins,serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,
spi:Blockly.Arduino.Boards.profiles.uno.spi,spiPins:Blockly.Arduino.Boards.profiles.uno.spiPins,spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:Blockly.Arduino.Boards.profiles.uno.i2c,i2cPins:Blockly.Arduino.Boards.profiles.uno.i2cPins,i2cSpeed:Blockly.Arduino.Boards.profiles.uno.i2cSpeed,builtinLed:Blockly.Arduino.Boards.profiles.uno.builtinLed,interrupt:Blockly.Arduino.Boards.profiles.uno.interrupt};
Blockly.Arduino.Boards.profiles.nano_168=Blockly.Arduino.Boards.duplicateBoardProfile(Blockly.Arduino.Boards.profiles.nano_328,"Arduino Nano 168","Arduino Nano with ATmega168 compatible board","arduino:avr:nano:cpu=atmega168");
Blockly.Arduino.Boards.profiles.duemilanove_168p={name:"Arduino Nano 168p",description:"Arduino Duemilanove with ATmega168p compatible board",compilerFlag:"arduino:avr:diecimila:cpu=atmega168",analogPins:Blockly.Arduino.Boards.profiles.uno.analogPins,digitalPins:Blockly.Arduino.Boards.profiles.uno.digitalPins,pwmPins:Blockly.Arduino.Boards.profiles.uno.pwmPins,serial:Blockly.Arduino.Boards.profiles.uno.serial,serialPins:Blockly.Arduino.Boards.profiles.uno.serialPins,serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,
spi:Blockly.Arduino.Boards.profiles.uno.spi,spiPins:Blockly.Arduino.Boards.profiles.uno.spiPins,spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:Blockly.Arduino.Boards.profiles.uno.i2c,i2cPins:Blockly.Arduino.Boards.profiles.uno.i2cPins,i2cSpeed:Blockly.Arduino.Boards.profiles.uno.i2cSpeed,builtinLed:Blockly.Arduino.Boards.profiles.uno.builtinLed,interrupt:Blockly.Arduino.Boards.profiles.uno.interrupt};
Blockly.Arduino.Boards.profiles.duemilanove_328p=Blockly.Arduino.Boards.duplicateBoardProfile(Blockly.Arduino.Boards.profiles.duemilanove_168p,"Arduino Duemilanove 328p","Arduino Duemilanove with ATmega328p compatible board","arduino:avr:diecimila");
Blockly.Arduino.Boards.profiles.mega={name:"Arduino Mega",description:"Arduino Mega-compatible board",compilerFlag:"arduino:avr:mega",analogPins:Blockly.Arduino.Boards.generateAnalogIo(0,15),digitalPins:Blockly.Arduino.Boards.generateDigitalIo(0,53),pwmPins:Blockly.Arduino.Boards.generateDigitalIo(2,13).concat(Blockly.Arduino.Boards.generateDigitalIo(44,46)),serial:[["serial","Serial"],["serial_1","Serial1"],["serial_2","Serial2"],["serial_3","Serial3"]],serialPins:{Serial:[["TX","0"],["RX","1"]],
Serial1:[["TX","18"],["TX","19"]],Serial2:[["TX","16"],["TX","17"]],Serial3:[["TX","14"],["TX","15"]]},serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,spi:[["SPI","SPI"]],spiPins:{SPI:[["MOSI","51"],["MISO","50"],["SCK","52"]]},spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:[["I2C","Wire"]],i2cPins:{Wire:[["SDA","20"],["SCL","21"]]},i2cSpeed:[["100kHz","100000L"],["400kHz","400000L"]],builtinLed:Blockly.Arduino.Boards.profiles.uno.builtinLed,interrupt:[["interrupt0",
"2"],["interrupt1","3"],["interrupt2","21"],["interrupt3","20"],["interrupt4","19"],["interrupt5","18"]]};
Blockly.Arduino.Boards.profiles.leonardo={name:"Arduino Leonardo",description:"Arduino Leonardo-compatible board",compilerFlag:"arduino:avr:leonardo",analogPins:Blockly.Arduino.Boards.generateAnalogIo(0,5).concat([["A6","4"],["A7","6"],["A8","8"],["A9","9"],["A10","10"],["A11","12"]]),digitalPins:Blockly.Arduino.Boards.generateDigitalIo(0,13).concat(Blockly.Arduino.Boards.generateAnalogIo(0,5)),pwmPins:Blockly.Arduino.Boards.profiles.uno.pwmPins.concat([["13","13"]]),serial:Blockly.Arduino.Boards.profiles.uno.serial,
serialPins:Blockly.Arduino.Boards.profiles.uno.serialPins,serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,spi:[["SPI","SPI"]],spiPins:{SPI:[["MOSI","ICSP-4"],["MISO","ICSP-1"],["SCK","ICSP-3"]]},spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:[["I2C","Wire"]],i2cPins:{Wire:[["SDA","2"],["SCL","3"]]},i2cSpeed:Blockly.Arduino.Boards.profiles.uno.i2cSpeed,builtinLed:Blockly.Arduino.Boards.profiles.uno.builtinLed,interrupt:[["interrupt0","3"],["interrupt1","2"],["interrupt2",
"0"],["interrupt3","1"],["interrupt4","17"]]};Blockly.Arduino.Boards.profiles.yun=Blockly.Arduino.Boards.duplicateBoardProfile(Blockly.Arduino.Boards.profiles.leonardo,"Arduino Yun","Arduino Yun compatible board");
Blockly.Arduino.Boards.profiles.atmel_atmega328p_xplained_mini={name:"Atmel atmega328p Xplained mini",description:"Atmel Xplained mini board with atmega328p (Uno compatible)",compilerFlag:"atmel:avr:atmega328p_xplained_mini",analogPins:Blockly.Arduino.Boards.profiles.uno.analogPins,digitalPins:Blockly.Arduino.Boards.profiles.uno.digitalPins.concat([["20","20"]]),pwmPins:Blockly.Arduino.Boards.profiles.uno.pwmPins,serial:Blockly.Arduino.Boards.profiles.uno.serial,serialPins:Blockly.Arduino.Boards.profiles.uno.serialPins,
serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,spi:Blockly.Arduino.Boards.profiles.uno.spi,spiPins:Blockly.Arduino.Boards.profiles.uno.spiPins,spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:Blockly.Arduino.Boards.profiles.uno.i2c,i2cPins:Blockly.Arduino.Boards.profiles.uno.i2cPins,i2cSpeed:Blockly.Arduino.Boards.profiles.uno.i2cSpeed,builtinLed:[["BUILTIN_LED","13"]],interrupt:Blockly.Arduino.Boards.profiles.uno.interrupt,builtinButton:[["BUILTIN_BUTTON","20"]]};
Blockly.Arduino.Boards.profiles.atmel_atmega328pb_xplained_mini=Blockly.Arduino.Boards.duplicateBoardProfile(Blockly.Arduino.Boards.profiles.atmel_atmega328p_xplained_mini,"Atmel atmega328pb Xplained mini","Atmel Xplained mini board with atmega328pb (Arduino Uno compatible)","atmel:avr:atmega328pb_xplained_mini");
Blockly.Arduino.Boards.profiles.atmel_atmega168pb_xplained_mini=Blockly.Arduino.Boards.duplicateBoardProfile(Blockly.Arduino.Boards.profiles.atmel_atmega328p_xplained_mini,"Atmel atmega168pb Xplained mini","Atmel Xplained mini board with atmega168pb (Arduino Uno compatible)","atmel:avr:atmega168pb_xplained_mini");
Blockly.Arduino.Boards.profiles.esp8266_huzzah={name:"Adafruit Feather HUZZAH",description:"Adafruit HUZZAH ESP8266 compatible board",compilerFlag:"esp8266:esp8266:generic",analogPins:[["A0","A0"]],digitalPins:[["0","0"],["2","2"],["4","4"],["5","5"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"]],pwmPins:[["2","2"]],serial:[["serial","Serial"]],serialPins:{Serial:[["RX","RX"],["TX","TX"]]},serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,spi:[["SPI","SPI"]],spiPins:{SPI:[["MOSI",
"13"],["MISO","12"],["SCK","14"]]},spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:[["I2C","Wire"]],i2cPins:{Wire:[["SDA","4"],["SCL","5"]]},i2cSpeed:Blockly.Arduino.Boards.profiles.uno.i2cSpeed,builtinLed:[["BUILTIN_1","0"]],interrupt:[["interrupt0","2"],["interrupt1","3"]]};
Blockly.Arduino.Boards.profiles.esp8266_wemos_d1={name:"Wemos D1",description:"Wemos D1 R2 compatible board",compilerFlag:"esp8266:esp8266:generic",analogPins:[["A0","A0"]],digitalPins:[["D0","D0"],["D1","D1"],["D2","D2"],["D3","D3"],["D4","D4"],["D5","D5"],["D6","D7"],["D8","D8"]],pwmPins:[["D1","D1"],["D2","D2"],["D3","D3"],["D4","D4"],["D5","D5"],["D6","D7"],["D8","D8"]],serial:[["serial","Serial"]],serialPins:{Serial:[["RX","RX"],["TX","TX"]]},serialSpeed:Blockly.Arduino.Boards.profiles.uno.serialSpeed,
spi:[["SPI","SPI"]],spiPins:{SPI:[["MOSI","D7"],["MISO","D6"],["SCK","D5"]]},spiClockDivide:Blockly.Arduino.Boards.profiles.uno.spiClockDivide,i2c:[["I2C","Wire"]],i2cPins:{Wire:[["SDA","D2"],["SCL","D1"]]},i2cSpeed:Blockly.Arduino.Boards.profiles.uno.i2cSpeed,builtinLed:[["BUILTIN_1","D4"]],interrupt:[["D0","D0"],["D1","D1"],["D2","D2"],["D3","D3"],["D4","D4"],["D5","D5"],["D6","D7"],["D8","D8"]]};Blockly.Arduino.Boards.selected=Blockly.Arduino.Boards.profiles.uno;
Blockly.Arduino.Boards.changeBoard=function(b,d){if(void 0===Blockly.Arduino.Boards.profiles[d])console.log("Tried to set non-existing Arduino board: "+d);else{Blockly.Arduino.Boards.selected=Blockly.Arduino.Boards.profiles[d];for(var e=b.getAllBlocks(),f=0;f<e.length;f++){var g=e[f].updateFields;g&&g.call(e[f])}}};
Blockly.Arduino.Boards.refreshBlockFieldDropdown=function(b,d,e){var f=b.getField(d);d=f.getValue();e=Blockly.Arduino.Boards.selected[e];f.menuGenerator_=e;f=!1;for(var g=0;g<e.length;g++)d==e[g][1]&&(f=!0);f?b.setWarningText(null,"bPin"):b.setWarningText("The old pin value "+d+" is no longer available.","bPin")};Blockly.Arduino.serialization={};Blockly.Arduino.sto_subfield=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"field_id",Blockly.Arduino.ORDER_ATOMIC);return["sto_subfield("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.sto_subarray=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"array_id",Blockly.Arduino.ORDER_ATOMIC);return["sto_subarray("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.sto_emplace=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"sread_ptr",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"sread_len",Blockly.Arduino.ORDER_ATOMIC),h=Blockly.Arduino.valueToCode(b,"fread_ptr",Blockly.Arduino.ORDER_ATOMIC),k=Blockly.Arduino.valueToCode(b,"fread_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,
"field_id",Blockly.Arduino.ORDER_ATOMIC);return["sto_emplace("+d+","+e+","+f+","+g+","+h+","+k+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.sto_erase=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"field_id",Blockly.Arduino.ORDER_ATOMIC);return["sto_erase("+d+","+e+","+f+","+g+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.sto_validate=function(b){var d=Blockly.Arduino.valueToCode(b,"read_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"read_len",Blockly.Arduino.ORDER_ATOMIC);return["sto_validate("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.colour={};Blockly.Arduino.colour_picker=Blockly.Arduino.noGeneratorCodeInline;Blockly.Arduino.colour_random=Blockly.Arduino.noGeneratorCodeInline;Blockly.Arduino.colour_rgb=Blockly.Arduino.noGeneratorCodeInline;Blockly.Arduino.colour_blend=Blockly.Arduino.noGeneratorCodeInline;Blockly.Arduino.otxn={};Blockly.Arduino.otxn_burden=function(b){return["otxn_burden()",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.otxn_field=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"field_id",Blockly.Arduino.ORDER_ATOMIC);return["otxn_field("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.otxn_field_txt=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"field_id",Blockly.Arduino.ORDER_ATOMIC);return["otxn_field_txt("+d+","+e+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.otxn_generation=function(b){return["otxn_generation()",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.otxn_type=function(b){return["otxn_type()",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.otxn_id=function(b){var d=Blockly.Arduino.valueToCode(b,"write_ptr",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"write_len",Blockly.Arduino.ORDER_ATOMIC);return["otxn_id("+d+","+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.otxn_slot=function(b){return["otxn_slot("+Blockly.Arduino.valueToCode(b,"slot_no",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.loops={};Blockly.Arduino.controls_repeat=function(b){var d=Number(b.getFieldValue("TIMES")),e=Blockly.Arduino.statementToCode(b,"DO");e=Blockly.Arduino.addLoopTrap(e,b.id);b=Blockly.Arduino.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE);return"for (int "+b+" = 0; "+b+" < "+d+"; "+b+"++) {\n"+e+"}\n"};
Blockly.Arduino.controls_repeat_ext=function(b){var d=Blockly.Arduino.valueToCode(b,"TIMES",Blockly.Arduino.ORDER_ADDITIVE)||"0",e=Blockly.Arduino.statementToCode(b,"DO");e=Blockly.Arduino.addLoopTrap(e,b.id);b="";var f=Blockly.Arduino.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE),g=d;d.match(/^\w+$/)||Blockly.isNumber(d)||(g=Blockly.Arduino.variableDB_.getDistinctName("repeat_end",Blockly.Variables.NAME_TYPE),b+="int "+g+" = "+d+";\n");return b+("for (int "+f+" = 0; "+f+" < "+
g+"; "+f+"++) {\n"+e+"}\n")};Blockly.Arduino.controls_whileUntil=function(b){var d="UNTIL"==b.getFieldValue("MODE"),e=Blockly.Arduino.valueToCode(b,"BOOL",d?Blockly.Arduino.ORDER_LOGICAL_OR:Blockly.Arduino.ORDER_NONE)||"false",f=Blockly.Arduino.statementToCode(b,"DO");f=Blockly.Arduino.addLoopTrap(f,b.id);d&&(e.match(/^\w+$/)||(e="("+e+")"),e="!"+e);return"while ("+e+") {\n"+f+"}\n"};
Blockly.Arduino.controls_for=function(b){var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(b,"FROM",Blockly.Arduino.ORDER_ASSIGNMENT)||"0",f=Blockly.Arduino.valueToCode(b,"TO",Blockly.Arduino.ORDER_ASSIGNMENT)||"0";Blockly.Arduino.valueToCode(b,"BY",Blockly.Arduino.ORDER_ASSIGNMENT);var g=Blockly.Arduino.statementToCode(b,"DO");g=Blockly.Arduino.addLoopTrap(g,b.id);b=parseFloat(e)<=parseFloat(f);return"for ("+d+" = "+e+"; GUARD("+
f+"),"+d+(b?" <= ":" >= ")+f+"; ++"+d+(") {\n"+g+"}\n")};Blockly.Arduino.controls_forEach=Blockly.Arduino.noGeneratorCodeLine;Blockly.Arduino.controls_flow_statements=function(b){switch(b.getFieldValue("FLOW")){case "BREAK":return"break;\n";case "CONTINUE":return"continue;\n"}throw"Unknown flow statement.";};Blockly.Arduino.map={};Blockly.Arduino.base_map=function(b){var d=Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_NONE)||"0";b=Blockly.Arduino.valueToCode(b,"DMAX",Blockly.Arduino.ORDER_ATOMIC)||"0";return["map("+d+", 0, 1024, 0, "+b+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.essential={};Blockly.Arduino.guard=function(b){return"GUARD("+Blockly.Arduino.valueToCode(b,"arg1",Blockly.Arduino.ORDER_ATOMIC)+");\n"};Blockly.Arduino._g_function=function(b){var d=Blockly.Arduino.valueToCode(b,"arg1",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"arg2",Blockly.Arduino.ORDER_ATOMIC);return"_g("+d+","+b+");\n"};Blockly.Arduino.comment=function(b){return"// "+b.getTitleValue("TEXT")+"\n"};
Blockly.Arduino.hook_template=function(b){var d=Blockly.Arduino.statementToCode(b,"SETUP_FUNC");d&&Blockly.Arduino.addSetup("userSetupCode",d,!0);b=b.getInputTargetBlock("LOOP_FUNC");d=Blockly.Arduino.blockToCode(b);if(!goog.isString(d))throw'Expecting code from statement block "'+b.type+'".';return d};Blockly.Arduino.tracevar=function(b){return"TRACEVAR("+Blockly.Arduino.valueToCode(b,"TRACEVAR",Blockly.Arduino.ORDER_ATOMIC)+");\n"};
Blockly.Arduino.TRACESTR=function(b){return'TRACESTR("'+b.getTitleValue("TEXT")+'");\n'};Blockly.Arduino.sbuf=function(b){return["SBUF("+Blockly.Arduino.valueToCode(b,"SBUF",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.buffer_equal=function(b){var d=Blockly.Arduino.valueToCode(b,"equal",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"hook_accid",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"account_field",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"length",Blockly.Arduino.ORDER_ATOMIC);return"BUFFER_EQUAL("+d+","+e+","+f+","+b+");\n"};
Blockly.Arduino.etxn_reserve=function(b){return"//before we start calling hook-api functions we should tell the hook how many tx we intend to create\netxn_reserve("+Blockly.Arduino.valueToCode(b,"NUM",Blockly.Arduino.ORDER_ATOMIC)+");\n"};Blockly.Arduino.clearbuf=function(b){return"CLEARBUF("+Blockly.Arduino.valueToCode(b,"buffer",Blockly.Arduino.ORDER_ATOMIC)+");\n"};
Blockly.Arduino.sub_offset=function(b){return["SUB_OFFSET("+Blockly.Arduino.valueToCode(b,"SUB_OFFSET",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.uint32_from_buf=function(b){return["UINT32_FROM_BUF("+Blockly.Arduino.valueToCode(b,"buffer_input",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.loops_for=function(b){var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("var0"),Blockly.Variables.NAME_TYPE),e=Blockly.Arduino.valueToCode(b,"arg0",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"arg1",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.valueToCode(b,"arg2",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.statementToCode(b,"NAME");return"for (int "+d+" = "+e+"; GUARD("+f+"),"+d+" <"+f+"; ++"+d+(") {\n"+b+"}\n")};
Blockly.Arduino.hook_account=function(b){return["hook_account("+Blockly.Arduino.valueToCode(b,"VAR",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};Blockly.Arduino.hook_account_statment=function(b){return"hook_account("+Blockly.Arduino.valueToCode(b,"VAR",Blockly.Arduino.ORDER_ATOMIC)+");\n"};Blockly.Arduino.sfcodes=function(b){b=b.getFieldValue("VALUE");console.log(b);return[b,Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.amount_to_drops=function(b){return["AMOUNT_TO_DROPS("+Blockly.Arduino.valueToCode(b,"AMOUNT",Blockly.Arduino.ORDER_ATOMIC)+")",Blockly.Arduino.ORDER_NONE]};
Blockly.Arduino.prepare_payment_simple=function(b){var d=Blockly.Arduino.valueToCode(b,"buf_out",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(b,"drops_amount",Blockly.Arduino.ORDER_ATOMIC),f=Blockly.Arduino.valueToCode(b,"drops_fee",Blockly.Arduino.ORDER_ATOMIC),g=Blockly.Arduino.valueToCode(b,"to_address",Blockly.Arduino.ORDER_ATOMIC),h=Blockly.Arduino.valueToCode(b,"dest_tag",Blockly.Arduino.ORDER_ATOMIC);b=Blockly.Arduino.valueToCode(b,"src_tag",Blockly.Arduino.ORDER_ATOMIC);return"PREPARE_PAYMENT_SIMPLE("+
d+","+e+","+f+","+g+","+h+","+b+");\n"};Blockly.Arduino.return_val=function(b){return"retrun("+Blockly.Arduino.valueToCode(b,"VAR",Blockly.Arduino.ORDER_ATOMIC)+");\n"};Blockly.Arduino.text={};Blockly.Arduino.text=function(b){return[Blockly.Arduino.quote_(b.getFieldValue("TEXT")),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.text_join=function(b){if(0==b.itemCount_)return['""',Blockly.Arduino.ORDER_ATOMIC];if(1==b.itemCount_)return["String("+(Blockly.Arduino.valueToCode(b,"ADD0",Blockly.Arduino.ORDER_UNARY_POSTFIX)||'""')+")",Blockly.Arduino.ORDER_UNARY_POSTFIX];var d=[];for(var e=0;e<b.itemCount_;e++){var f=Blockly.Arduino.valueToCode(b,"ADD"+e,Blockly.Arduino.ORDER_NONE);d[e]=""==f?'""':"String("+f+")"}d=d.join(" + ");return[d,Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_append=function(b){var d=Blockly.Arduino.variableDB_.getName(b.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);b=Blockly.Arduino.valueToCode(b,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX);return d+" += "+(""==b?'""':"String("+b+")")+";\n"};Blockly.Arduino.text_length=function(b){return["String("+(Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX)||'""')+").length()",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_isEmpty=function(b){var d=[];d.push("boolean "+Blockly.Arduino.DEF_FUNC_NAME+"(String msg) {");d.push("  if (msg.length() == 0) {");d.push("    return true;");d.push("  } else {");d.push("    return false;");d.push("  }");d.push("}");d=Blockly.Arduino.addFunction("isStringEmpty",d.join("\n"));b=Blockly.Arduino.valueToCode(b,"VALUE",Blockly.Arduino.ORDER_UNARY_POSTFIX);return[d+"("+(""==b?'""':"String("+b+")")+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_trim=function(b){Blockly.Arduino.text_trim.OPERATORS={LEFT:".trim()",RIGHT:".trim()",BOTH:".trim()"};var d=b.getFieldValue("MODE");d=Blockly.Arduino.text_trim.OPERATORS[d];b=Blockly.Arduino.valueToCode(b,"TEXT",Blockly.Arduino.ORDER_UNARY_POSTFIX);return[(""==b?'""':"String("+b+")")+d,Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_print=function(b){var d=Blockly.Arduino.Boards.selected.serial[0][1];Blockly.Arduino.addSetup("serial_"+d,d+".begin(9600);",!1);b=Blockly.Arduino.valueToCode(b,"TEXT",Blockly.Arduino.ORDER_NONE);return d+".print("+(""==b?'""':"String("+b+")")+");\n"};
Blockly.Arduino.text_prompt_ext=function(b){var d=Blockly.Arduino.Boards.selected.serial[0][1],e=b.getFieldValue("TYPE"),f=[],g=e==Blockly.Types.NUMBER.output;g?f.push("int "+Blockly.Arduino.DEF_FUNC_NAME+"(String msg) {"):f.push("String "+Blockly.Arduino.DEF_FUNC_NAME+"(String msg) {");f.push("  "+d+".println(msg);");f.push("  boolean stringComplete = false;");g?f.push("  int content = 0;"):f.push('  String content = "";');f.push("  while (stringComplete == false) {");f.push("    if ("+d+".available()) {");
g?(f.push("      content = "+d+".parseInt();"),f.push("      stringComplete = true;")):(f.push("      char readChar = (char)"+d+".read();"),f.push("      if (readChar == '\\n' || readChar == '\\r') {"),f.push("        stringComplete = true;"),f.push("      } else {"),f.push("        content += readChar;"),f.push("      }"));f.push("    }");f.push("  }");f.push("  // Empty incoming serial buffer");f.push("  while(Serial.available()) { Serial.read(); };");f.push("  return content;");f.push("}");e=Blockly.Arduino.addFunction("getUserInputPrompt"+
e,f.join("\n"));Blockly.Arduino.addSetup("serial_"+d,d+".begin(9600);",!1);b=Blockly.Arduino.valueToCode(b,"TEXT",Blockly.Arduino.ORDER_NONE)||'""';return[e+"("+b+")",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.text_endString=function(b){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.text_indexOf=function(b){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.text_charAt=function(b){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]};
Blockly.Arduino.text_getSubstring=function(b){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.text_changeCase=function(b){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.text_prompt=function(b){return["",Blockly.Arduino.ORDER_UNARY_POSTFIX]};Blockly.Arduino.serial={};Blockly.Arduino.serial_print=function(b){for(var d=b.getFieldValue("SERIAL_ID"),e=Blockly.Arduino.valueToCode(b,"CONTENT",Blockly.Arduino.ORDER_ATOMIC)||"0",f="TRUE"==b.getFieldValue("NEW_LINE"),g=Blockly.Arduino.Boards.selected.serialPins[d],h=0;h<g.length;h++)Blockly.Arduino.reservePin(b,g[h][1],Blockly.Arduino.PinTypes.SERIAL,"SERIAL "+g[h][0]);return f?d+".println("+e+");\n":d+".print("+e+");\n"};
Blockly.Arduino.serial_setup=function(b){var d=b.getFieldValue("SERIAL_ID");b=b.getFieldValue("SPEED");Blockly.Arduino.addSetup("serial_"+d,d+".begin("+b+");",!0);return""};